\hypertarget{_b_n_o08x_test_helper_8hpp_source}{}\doxysection{BNO08x\+Test\+Helper.\+hpp}
\label{_b_n_o08x_test_helper_8hpp_source}\index{/media/develop/git/imu\_pr\_cleanup/components/esp32\_BNO08x/include/BNO08xTestHelper.hpp@{/media/develop/git/imu\_pr\_cleanup/components/esp32\_BNO08x/include/BNO08xTestHelper.hpp}}
\mbox{\hyperlink{_b_n_o08x_test_helper_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{comment}{// in-\/house includes}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_b_n_o08x_8hpp}{BNO08x.hpp}}"{}}}
\DoxyCodeLine{10 }
\DoxyCodeLine{16 \textcolor{keyword}{class }\mbox{\hyperlink{class_b_n_o08x_test_helper}{BNO08xTestHelper}}}
\DoxyCodeLine{17 \{}
\DoxyCodeLine{18     \textcolor{keyword}{private}:}
\DoxyCodeLine{19         \textcolor{keyword}{static} \textcolor{keyword}{inline} uint8\_t test\_imu\_buffer[\textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_b_n_o08x}{BNO08x}})];}
\DoxyCodeLine{20         \textcolor{keyword}{inline} \textcolor{keyword}{static} \mbox{\hyperlink{class_b_n_o08x}{BNO08x}}* test\_imu = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{21         \textcolor{keyword}{inline} \textcolor{keyword}{static} \mbox{\hyperlink{structbno08x__config__t}{bno08x\_config\_t}} imu\_cfg;}
\DoxyCodeLine{22 }
\DoxyCodeLine{23         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{char}* TAG = \textcolor{stringliteral}{"{}BNO08xTestHelper"{}};}
\DoxyCodeLine{24 }
\DoxyCodeLine{25     \textcolor{keyword}{public}:}
\DoxyCodeLine{33         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_n_o08x_test_helper_a066f8389fd1c682ec9565ebc3060d885}{print\_test\_start\_banner}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* TEST\_TAG)}
\DoxyCodeLine{34         \{}
\DoxyCodeLine{35             printf(\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ BEGIN TEST: \%s -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n\(\backslash\)r"{}}, TEST\_TAG);}
\DoxyCodeLine{36         \}}
\DoxyCodeLine{37 }
\DoxyCodeLine{45         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_n_o08x_test_helper_a16423fc3250e88eb5392800022f82919}{print\_test\_end\_banner}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* TEST\_TAG)}
\DoxyCodeLine{46         \{}
\DoxyCodeLine{47             printf(\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ END TEST: \%s -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\(\backslash\)n\(\backslash\)r"{}}, TEST\_TAG);}
\DoxyCodeLine{48         \}}
\DoxyCodeLine{49 }
\DoxyCodeLine{58         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_n_o08x_test_helper_a23593453a05f7cac26fd341371197a8c}{print\_test\_msg}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* TEST\_TAG, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* msg)}
\DoxyCodeLine{59         \{}
\DoxyCodeLine{60             printf(\textcolor{stringliteral}{"{}\%s: \%s: \%s\(\backslash\)n\(\backslash\)r"{}}, TAG, TEST\_TAG, msg);}
\DoxyCodeLine{61         \}}
\DoxyCodeLine{62 }
\DoxyCodeLine{70         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_n_o08x_test_helper_a9e2f9bf13f28f1a6ba87e86bc5947cf1}{set\_test\_imu\_cfg}}(\mbox{\hyperlink{structbno08x__config__t}{bno08x\_config\_t}} cfg)}
\DoxyCodeLine{71         \{}
\DoxyCodeLine{72             imu\_cfg = cfg;}
\DoxyCodeLine{73         \}}
\DoxyCodeLine{74 }
\DoxyCodeLine{80         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_n_o08x_test_helper_a6bd040c7d670a9713f2ab8a8a3913518}{create\_test\_imu}}()}
\DoxyCodeLine{81         \{}
\DoxyCodeLine{82             \textcolor{keywordflow}{if} (test\_imu != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{83                 \mbox{\hyperlink{class_b_n_o08x_test_helper_ae2d6df7dcfdbd106c2247803461bbc40}{destroy\_test\_imu}}();}
\DoxyCodeLine{84 }
\DoxyCodeLine{85             test\_imu = \textcolor{keyword}{new} (\&test\_imu\_buffer) \mbox{\hyperlink{class_b_n_o08x}{BNO08x}}();}
\DoxyCodeLine{86         \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{93         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_n_o08x_test_helper_ae2d6df7dcfdbd106c2247803461bbc40}{destroy\_test\_imu}}()}
\DoxyCodeLine{94         \{}
\DoxyCodeLine{95             \textcolor{keywordflow}{if} (test\_imu != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{96             \{}
\DoxyCodeLine{97                 test\_imu-\/>\string~BNO08x();  }
\DoxyCodeLine{98                 test\_imu = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{99             \}}
\DoxyCodeLine{100         \}}
\DoxyCodeLine{101 }
\DoxyCodeLine{107         \textcolor{keyword}{static} \mbox{\hyperlink{class_b_n_o08x}{BNO08x}}* \mbox{\hyperlink{class_b_n_o08x_test_helper_a41a432a3fe288e45b6ab139a00bd7d6b}{get\_test\_imu}}()}
\DoxyCodeLine{108         \{}
\DoxyCodeLine{109             \textcolor{keywordflow}{return} test\_imu;}
\DoxyCodeLine{110         \}}
\DoxyCodeLine{111 }
\DoxyCodeLine{117         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a71d9fd7d459a98a7e9089a8587a21f8d}{call\_init\_config\_args}}()}
\DoxyCodeLine{118         \{}
\DoxyCodeLine{119             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{120                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{121 }
\DoxyCodeLine{122             \textcolor{keywordflow}{return} test\_imu-\/>init\_config\_args();}
\DoxyCodeLine{123         \}}
\DoxyCodeLine{124 }
\DoxyCodeLine{130         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a504749533ccd91890d73440809d38161}{call\_init\_gpio}}()}
\DoxyCodeLine{131         \{}
\DoxyCodeLine{132             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{133                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{134 }
\DoxyCodeLine{135             \textcolor{keywordflow}{return} test\_imu-\/>init\_gpio();}
\DoxyCodeLine{136         \}}
\DoxyCodeLine{137 }
\DoxyCodeLine{143         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a836c928981ac85d34668c9b97af17a15}{call\_init\_hint\_isr}}()}
\DoxyCodeLine{144         \{}
\DoxyCodeLine{145             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{146                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{147 }
\DoxyCodeLine{148             \textcolor{keywordflow}{return} test\_imu-\/>init\_hint\_isr();}
\DoxyCodeLine{149         \}}
\DoxyCodeLine{150 }
\DoxyCodeLine{156         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a7d2d784da1e850dab41154b35d7cdab5}{call\_init\_spi}}()}
\DoxyCodeLine{157         \{}
\DoxyCodeLine{158             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{159                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{160 }
\DoxyCodeLine{161             \textcolor{keywordflow}{return} test\_imu-\/>init\_spi();}
\DoxyCodeLine{162         \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{169         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a935a69784981caf90b4e135e3e257db4}{call\_init\_tasks}}()}
\DoxyCodeLine{170         \{}
\DoxyCodeLine{171             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{172                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{173 }
\DoxyCodeLine{174             \textcolor{keywordflow}{return} test\_imu-\/>init\_tasks();}
\DoxyCodeLine{175         \}}
\DoxyCodeLine{176 }
\DoxyCodeLine{182         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a854c60f602fe6d9af1da1a07eee0a449}{call\_init\_sh2\_HAL}}()}
\DoxyCodeLine{183         \{}
\DoxyCodeLine{184             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{185                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{186 }
\DoxyCodeLine{187             \textcolor{keywordflow}{return} test\_imu-\/>init\_sh2\_HAL();}
\DoxyCodeLine{188         \}}
\DoxyCodeLine{189 }
\DoxyCodeLine{195         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a347b8ca2697388394b7cb68c8895494b}{call\_deinit\_gpio}}()}
\DoxyCodeLine{196         \{}
\DoxyCodeLine{197             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{198                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{199 }
\DoxyCodeLine{200             \textcolor{keywordflow}{return} test\_imu-\/>deinit\_gpio();}
\DoxyCodeLine{201         \}}
\DoxyCodeLine{202 }
\DoxyCodeLine{208         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_ac15a216ea5561b190f25f83caa749261}{call\_deinit\_hint\_isr}}()}
\DoxyCodeLine{209         \{}
\DoxyCodeLine{210             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{211                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{212 }
\DoxyCodeLine{213             \textcolor{keywordflow}{return} test\_imu-\/>deinit\_hint\_isr();}
\DoxyCodeLine{214         \}}
\DoxyCodeLine{215 }
\DoxyCodeLine{221         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a56ec98df9439461469bf0d2c23bb3868}{call\_deinit\_spi}}()}
\DoxyCodeLine{222         \{}
\DoxyCodeLine{223             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{224                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{225 }
\DoxyCodeLine{226             \textcolor{keywordflow}{return} test\_imu-\/>deinit\_spi();}
\DoxyCodeLine{227         \}}
\DoxyCodeLine{228 }
\DoxyCodeLine{234         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_a3be103abfab70eef3c1b1609a0c46bec}{call\_deinit\_tasks}}()}
\DoxyCodeLine{235         \{}
\DoxyCodeLine{236             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{237                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{238 }
\DoxyCodeLine{239             \textcolor{keywordflow}{return} test\_imu-\/>deinit\_tasks();}
\DoxyCodeLine{240         \}}
\DoxyCodeLine{241 }
\DoxyCodeLine{247         \textcolor{keyword}{static} esp\_err\_t \mbox{\hyperlink{class_b_n_o08x_test_helper_ab1f8d61956fbceecf0baf08cb878397d}{call\_deinit\_sh2\_HAL}}()}
\DoxyCodeLine{248         \{}
\DoxyCodeLine{249             \textcolor{keywordflow}{if} (test\_imu == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{250                 \textcolor{keywordflow}{return} ESP\_FAIL;}
\DoxyCodeLine{251 }
\DoxyCodeLine{252             \textcolor{keywordflow}{return} test\_imu-\/>deinit\_sh2\_HAL();}
\DoxyCodeLine{253         \}}
\DoxyCodeLine{254 \};}

\end{DoxyCode}
